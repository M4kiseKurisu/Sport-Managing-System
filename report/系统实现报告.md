# 系统实现报告



## 一、系统结构设计



## 二、数据库基本表的定义

在后端数据库实现中，我们选择采用 Django 中的 ORM 技术，在 `models.py` 文件中定义了 7 个实体表和 11 个联系表，这些表的结构和关系都通过类继承 `models.Model` 来定义，并且利用 ORM 提供的语法来定义了数据库表的类型、约束和关系。通过 ORM，能够以面向对象的方式来操作数据库，简化了数据库操作的编程过程，并提高了开发效率。

### 2.1 实体表

**用户表：**管理用户个人信息。

|  属性名  |     字段名     | 数据类型 |       约束       |
| :------: | :------------: | :------: | :--------------: |
|    ID    |      uid       |          |   PRIMARY KEY    |
|   账号   |    account     |          | NOT NULL、UNIQUE |
|   密码   |    password    |          |     NOT NULL     |
|   姓名   |   user_name    |          |     NOT NULL     |
|   性别   |  user_gender   |          |     NOT NULL     |
|   年龄   |    user_age    |          |     NOT NULL     |
| 个人签名 | user_signature |          |     NOT NULL     |
| 电话号码 |  phone_number  |          | NOT NULL、UNIQUE |
|   邮箱   |     email      |          | NOT NULL、UNIQUE |
|   头像   |    picture     |          |                  |

```python
class User(models.Model):
    """ 用户实体表 """
    USER_GENDER = (
        (0, '女'),
        (1, '男'),
    )
    uid = models.IntegerField(primary_key=True)
    account = models.CharField(max_length=32, unique=True)
    password = models.CharField(max_length=32)
    user_name = models.CharField(max_length=10)
    user_age = models.IntegerField()
    user_gender = models.SmallIntegerField(choices=USER_GENDER)
    phone_number = models.BigIntegerField(unique=True)
    email = models.EmailField(max_length=32, unique=True)
    user_signature = models.CharField(max_length=128, default="", blank=True)
    picture = models.ImageField(upload_to='images/user/', storage=ImageStorage(), null=True)
```



**团体表：**管理团体的基本信息。

|  属性名  |   字段名   | 数据类型 |       约束       |
| :------: | :--------: | :------: | :--------------: |
|    ID    |    gid     |          |   PRIMARY KEY    |
|   名称   | group_name |          | NOT NULL、UNIQUE |
|   描述   | group_desc |          |     NOT NULL     |
| 团体图片 |  picture   |          |                  |
| 人数限制 |  maximum   |          |     NOT NULL     |
| 成员人数 |  capacity  |          |     NOT NULL     |
|   标签   |    tag     |          |     NOT NULL     |
|  创建人  |  creator   |          |   FOREIGN KEY    |

```python
class Group(models.Model):
    """ 团体实体表 """
    gid = models.IntegerField(primary_key=True)
    creator = models.ForeignKey(User, on_delete=models.CASCADE)
    group_name = models.CharField(max_length=32, unique=True)
    group_desc = models.CharField(max_length=128)
    tag = models.CharField(max_length=32)
    maximum = models.IntegerField()
    capacity = models.IntegerField()
    picture = models.ImageField(upload_to='images/group/', storage=ImageStorage(), null=True)
```



**器材表：**管理器材实体的基本信息。

|  属性名  |  字段名  | 数据类型 |       约束       |
| :------: | :------: | :------: | :--------------: |
|    ID    |   eid    |          |   PRIMARY KEY    |
|   类别   | category |          | NOT NULL、UNIQUE |
|   数量   |  amount  |          |     NOT NULL     |
| 器材图片 | picture  |          |                  |

```python
class Equipment(models.Model):
    """ 器材实体表 """
    eid = models.IntegerField(primary_key=True)
    category = models.CharField(max_length=32, unique=True)
    amount = models.IntegerField(default=0)
    picture = models.ImageField(upload_to='images/equipment/', storage=ImageStorage(), null=True)
```



**场地表：**管理场地的基本信息。

|  属性名  |   字段名   | 数据类型 | 约束 |
| :------: | :--------: | :------: | :--: |
|    ID    |    fid     |          |      |
|   位置   |  location  |          |      |
|   类别   |  category  |          |      |
| 开始时间 | open_time  |          |      |
| 结束时间 | close_time |          |      |
| 项目限制 |   limit    |          |      |

```python
class Field(models.Model):
    """ 运动场地实体表 """
    fid = models.IntegerField(primary_key=True)
    location = models.CharField(max_length=32, unique=True)
    category = models.CharField(max_length=16, db_index=True)
    limit = models.BooleanField()
    open_time = models.TimeField()
    close_time = models.TimeField()
```



## 三、系统重要功能实现方法





## 四、系统实现结果



## 五、总结